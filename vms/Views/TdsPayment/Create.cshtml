@model vms.entity.viewModels.Payment.VmTdsPayment
@{ ViewData["Title"] = "Create TDS Payment"; }

@section contentheader
{
	<div class="p-3 page-header">
		@ViewData["Title"]
	</div>
}

<div>
<div class="row">
	<div class="col-md-4 form-1">
		<form asp-action="Create" method="post" class="form-horizontal" id="frmMainInformation">

			<div class="form-body">

				<div class="form-group  mt-3">
						<label asp-for="MushakYear">Year</label>
					<div>
							@Html.DropDownList("MushakYear", Model.YearList, "Select Year", new { @class = "form-control",  @required = true, @id = "MushakYear" })
						<span asp-validation-for="MushakYear" ></span>
					</div>
				</div>
				<div class="form-group  mt-3">
						<label asp-for="MushakMonth" >Month</label>
					<div>
						@Html.DropDownList("MushakMonth", Model.MonthList, "Select Month", new { @class = "form-control form-control-sm", @id = "MushakMonth" })
						<span asp-validation-for="MushakMonth" ></span>
					</div>
				</div>

				<div class="form-group mt-3">
					<label asp-for="CustomsAndVatcommissionarateId" ></label>
					<select asp-for="CustomsAndVatcommissionarateId" >
						<option value="@null">Select Customs &amp; VAT Commissionerate</option>
						@if (Model.CustomsAndVATCommissionarate.Any())
						{
							foreach (var customsAndVATCommissionarate in Model.CustomsAndVATCommissionarate)
							{
								<option value="@customsAndVATCommissionarate.CustomsAndVatcommissionarateId"
								        data-Operational-Code-First-Digit="@customsAndVATCommissionarate.OperationalCode1stDigit"
								        data-Operational-Code-Second-Digit="@customsAndVATCommissionarate.OperationalCode2ndDigit"
								        data-Operational-Code-Third-Digit="@customsAndVATCommissionarate.OperationalCode3rdDigit"
								        data-Operational-Code-Fourth-Digit="@customsAndVATCommissionarate.OperationalCode4thDigit">
									@customsAndVATCommissionarate.Name
								</option>
							}
						}
					</select>
					<span asp-validation-for="CustomsAndVatcommissionarateId" ></span>
				</div>


				<div class="form-group mt-3">
					<label  asp-for="EconomicCode1stDisit"></label>
					<div class="input-group economic-code-group">

						<input type="text" asp-for="EconomicCode1stDisit" class="form-control form-control-sm economic-code"/>
						<input type="text" asp-for="EconomicCode2ndDisit" class="form-control form-control-sm economic-code ms-1"/>
						<input type="text" asp-for="EconomicCode3rdDisit" class="form-control form-control-sm economic-code"/>
						<input type="text" asp-for="EconomicCode4thDisit" class="form-control form-control-sm economic-code"/>
						<input type="text" asp-for="EconomicCode5thDisit" class="form-control form-control-sm economic-code"/>
						<input type="text" asp-for="EconomicCode6thDisit" class="form-control form-control-sm economic-code ms-1"/>
						<input type="text" asp-for="EconomicCode7thDisit" class="form-control form-control-sm economic-code"/>
						<input type="text" asp-for="EconomicCode8thDisit" class="form-control form-control-sm economic-code"/>
						<input type="text" asp-for="EconomicCode9thDisit" class="form-control form-control-sm economic-code"/>
						<input type="text" asp-for="EconomicCode10thDisit" class="form-control form-control-sm economic-code ms-1"/>
						<input type="text" asp-for="EconomicCode11thDisit" class="form-control form-control-sm economic-code"/>
						<input type="text" asp-for="EconomicCode12thDisit" class="form-control form-control-sm economic-code"/>
						<input type="text" asp-for="EconomicCode13thDisit" class="form-control form-control-sm economic-code"/>

						<span asp-validation-for="EconomicCode1stDisit" ></span>
						<span asp-validation-for="EconomicCode2ndDisit" ></span>
						<span asp-validation-for="EconomicCode3rdDisit" ></span>
						<span asp-validation-for="EconomicCode4thDisit" ></span>
						<span asp-validation-for="EconomicCode5thDisit" ></span>
						<span asp-validation-for="EconomicCode6thDisit" ></span>
						<span asp-validation-for="EconomicCode7thDisit" ></span>
						<span asp-validation-for="EconomicCode8thDisit" ></span>
						<span asp-validation-for="EconomicCode9thDisit" ></span>
						<span asp-validation-for="EconomicCode10thDisit" ></span>
						<span asp-validation-for="EconomicCode11thDisit" ></span>
						<span asp-validation-for="EconomicCode12thDisit" ></span>
						<span asp-validation-for="EconomicCode13thDisit" ></span>
					</div>
				</div>

				<div class="form-group  mt-3">
						<label asp-for="PaidAmount">Paid Amount</label>
					<div>
						<input asp-for="PaidAmount" readonly="readonly" class="form-control form-control-sm"/>
						<span asp-validation-for="PaidAmount" ></span>
					</div>
				</div>


				<div class="form-group  mt-3">
						<label asp-for="PaymentDate">Payment Date</label>
					<div>

						<input type="date" id="PaymentDate" asp-for="PaymentDate" class="form-control form-control-sm" value="@DateTime.Now"/>
						<span asp-validation-for="PaymentDate" ></span>
					</div>
				</div>

				<div class="form-group  mt-3">
						<label asp-for="BankId">Bank</label>
					<div>
							<select asp-for="BankId" asp-items="Model.BankList.CustomSelectListToSelectList()">
								<option value="@null">Select Bank</option>
							</select>
						<span asp-validation-for="BankId" ></span>
					</div>
				</div>

				<div class="form-group  mt-3">
						<label asp-for="BankBranchName">Bank Branch</label>
					<div>
						<input asp-for="BankBranchName" class="form-control form-control-sm"/>
						<span asp-validation-for="BankBranchName" ></span>
					</div>
				</div>

				<div class="form-group mt-3">
					<label asp-for="BankBranchCountryId" ></label>
						<select asp-for="BankBranchCountryId" asp-items="Model.CountryList.CustomSelectListToSelectList()" >
						<option value="@null">Select Country</option>
					</select>
					<span asp-validation-for="BankBranchCountryId" ></span>
				</div>

				<div class="form-group mt-3">
					<label asp-for="BankBranchDistrictOrCityId" ></label>
					<select asp-for="BankBranchDistrictOrCityId" asp-items="Model.DistrictOrCItyList.CustomSelectListToSelectList()" >
						<option value="@null">District/City</option>
					</select>
					<span asp-validation-for="BankBranchDistrictOrCityId" ></span>
				</div>

			</div>

		</form>
	</div>

	<div class="col-md-8 custom-scroll-container form-3">
		<h4>TDS List</h4>
		<form id="frmTds" class="tds-list-for-payment">
			<table class="table table-bordered form-table" id="docTable">
				<thead>
				<tr>
					<th>
						<input class="form-check-input" id="isMainTds" type="checkbox">
					</th>
					<th>Branch</th>
					<th>Vendor</th>
					<th>VAT Challan</th>
					<th>TDS Amount</th>

				</tr>
				</thead>
				<tbody>
				@foreach (var item in Model.purchaseList)
				{
					<tr>
						<td class="text-center">
							<input class="form-check-input isTds"
							       type="checkbox"
							       data-paidAmount="@item.TdsAmount"
							       data-purchaseId="@item.PurchaseId">
						</td>
						@if (item.OrgBranch != null)
						{
							<td>@item.OrgBranch.Name</td>
						}
						else
						{
							<td></td>
						}
						<td>@item.Vendor.Name (@item.Vendor.BinNo)</td>
						<td>@item.VatChallanNo (@item.VatChallanIssueDate)</td>
						<td>
									@if (item.TdsAmount != null)
							{
										@item.TdsAmount
							}
							else
							{
								{
											item.TdsAmount = 0;
								}
										@item.TdsAmount
							}

						</td>
					</tr>
				}
				</tbody>
				<tfoot>

				</tfoot>
			</table>
		</form>
	</div>

</div>
<div class="row">
	<div class="col-12">
		<div class="float-end mt-3">
			<button type="submit" data-requiredconfirmation="true" id="btnSave" class="btn  btn-primary btn-sm"><i class="bi bi-check-lg"></i> Submit</button>
			<button type="button" value="Reset" onclick="location.reload();" class="btn  btn-warning btn-sm"><i class="bi bi-arrow-repeat"></i> Reset</button>
			<a asp-action="Index" class="btn btn-secondary btn-sm"><i class="bi bi-slash-circle"></i> Cancel</a>
		</div>
	</div>
</div>


</div>


@section Scripts{
	<script src="~/CustomJs/TdsPayment.js?vguid=@ViewStaticData.StaticFileVersionGuid"></script>
}