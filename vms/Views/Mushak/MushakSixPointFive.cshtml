@model vms.entity.viewModels.MushakViewModel.TransferChallanViewModel
@using Microsoft.AspNetCore.Mvc.TagHelpers
@{
	ViewData["Title"] = "Mushak- 6.5 (Challan)";
	var watermarkStatusClass = "";
	var languageClass = "";

	if (Model.Language == 0)
	{
		languageClass = "ivat-bangla-font";
	}
	if (!string.IsNullOrEmpty(Model.ChallanModel.TransferChallan.InvoiceStatus))
	{
		watermarkStatusClass = "copy-watermark";
	}
	decimal sumProductPrice = 0;
	Layout = "_LayoutMushak";
}

@section contentheader
{
	<div class="p-2 page-header d-flex">
		<div class="flex-grow-1">
			@ViewData["Title"]
		</div>
		<div class="d-flex justify-content-start">
			<div class="me-1">
				<button id="btnPrint" type="button" class="btn btn-sm btn-primary"><i class="bi bi-printer-fill"></i> Print</button>
			</div>
		</div>
	</div>
}

<div class="gray-slim-scroll-container">
	<div class="long-table-scroll-container">
		<div class="report-section">

			<div class="report-margin @languageClass" id="printableArea">
				@if (Model.ChallanModel.TransferChallan != null)
				{
					<div class="row">
						<div class="col-2">
							@if (Model.IsGovtLogoRequired)
							{
								<img src="/images/logo_bd_govt.svg" style="height: 80px;"/>
							}
						</div>

						<div class="col-8 report-header mt-3">
							<div>@(Model.Language == 0 ? "গণপ্রজাতন্ত্রী বাংলাদেশ সরকার" : "GOVERNMENT OF THE PEOPLE'S REPUBLIC OF BANGLADESH")</div>
							<div class="sub-header"> @(Model.Language == 0 ? "জাতীয় রাজস্ব বোর্ড" : "NATIONAL BOARD OF REVENUE")</div>
						</div>
						<div class="col-2">
							<div class="mushak-name">@(Model.Language == 0 ? "মূসক- ৬.৫" : "Mushak- 6.5")</div>
						</div>

						<div class="col-12 report-header">
							<div class="sub-header"> @(Model.Language == 0 ? "কেন্দ্রীয় নিবন্ধিত প্রতিষ্ঠানের পণ্য স্থানান্তর চালানপত্র" : "Goods Transfer Invoice of Centrally Registered Company")</div>
							<div class="sub-header"> @(Model.Language == 0 ? "[বিধি-৪০ এর উপ-বিধি (১) এর দফা (ঙ)  দ্র্রষ্টব্য]" : "[Note clause (e) of sub-rule (1) of rule 40]")</div>

						</div>
						<div class="col-12 text-center mt-2">
							<div>@(Model.Language == 0 ? "নিবন্ধিত ব্যক্তির নাম:" : "Name of the registered person:") @Model.ChallanModel.TransferChallan.OrganizationName </div>
							<div>@(Model.Language == 0 ? "নিবন্ধিত ব্যক্তির বিআইএন:" : "BIN of the registered person:") @Model.ChallanModel.TransferChallan.OrganizationBinNo </div>
							<div class="company-other-info">@(Model.Language == 0 ? "নিবন্ধিত ব্যক্তির ঠিকানা:" : "Address of the registered person:") @Model.ChallanModel.TransferChallan.OrganizationAddress</div>


						</div>
						<div class="col-8 mt-3">
							<div>@(Model.Language == 0 ? " প্রেরণকারী শাখা/পণ্যগারের নাম:" : "Name of issuing branch:") @Model.ChallanModel.TransferChallan.SenderBranchName</div>
							<div>@(Model.Language == 0 ? " প্রেরণকারী শাখা /পণ্যগারের ঠিকানা:" : "Address of issuing branch:") @Model.ChallanModel.TransferChallan.SenderBranchAddress</div>
							<div>@(Model.Language == 0 ? "গ্রহীতা শাখা/পণ্যগারের নাম:" : "Name of receiving branch:") @Model.ChallanModel.TransferChallan.ReceiverBranchName</div>
							<div>@(Model.Language == 0 ? "গ্রহীতা শাখা/পণ্যগারের ঠিকানা:" : "Address of receiving branch:") @Model.ChallanModel.TransferChallan.ReceiverBranchAddress</div>

							<div>@(Model.Language == 0 ? "চালকের নাম : " : "Driver Name : ") @Model.ChallanModel.TransferChallan.VehicleDriverName</div>
							<div>@(Model.Language == 0 ? "চালকের মোবাইল নং : " : "Driver Mobile No. : ") @Model.ChallanModel.TransferChallan.VehicleDriverContactNo</div>
							<div>@(Model.Language == 0 ? "যানবাহনের প্রকৃতি : " : "Vehicle Type : ") @Model.ChallanModel.TransferChallan.VehicleTypeName</div>
							<div>@(Model.Language == 0 ? "যানবাহনের নম্বর : " : "Vehicle Registration No. : ") @Model.ChallanModel.TransferChallan.VehicleRegNo</div>
						</div>

						<div class="col-4 mt-3">
							<div style="margin-top: 3px">@(Model.Language == 0 ? $"{Model.InvoiceNameBan} নং: " : $"{Model.InvoiceNameEng} No.: ") @Model.ChallanModel.TransferChallan.InvoiceNo </div>
							<div style="margin-top: 3px">@(Model.Language == 0 ? $"{Model.InvoiceNameBan}-এর তারিখ: " : $"{Model.InvoiceNameEng} Date: ") @StringGenerator.DateTimeToStringWithoutTime(Model.ChallanModel.TransferChallan.InvoiceDate) </div>
							<div>@(Model.Language == 0 ? "চালানপত্রের নম্বর:" : "Challan No. : ") @Model.ChallanModel.TransferChallan.TransferChallanNo </div>
							<div style="margin-top: 3px">@(Model.Language == 0 ? "ইস্যুর তারিখ:" : "Issue Date: ") @StringGenerator.DateTimeToStringWithoutTime(Model.ChallanModel.TransferChallan.TransferChallanPrintedTime)</div>
							<div style="margin-top: 3px">@(Model.Language == 0 ? "ইস্যুর সময়: " : "Issue Time: ") @StringGenerator.DateTimeToTimeString(Model.ChallanModel.TransferChallan.TransferChallanPrintedTime)</div>
						</div>

						<div class="col-12 mt-3 @watermarkStatusClass">
							<table class="table table-bordered">

								<tbody>
								<tr class="text-center">
									<td>
										@(Model.Language == 0 ? "ক্রমিক" : "SL")
									</td>

									<td>
										@(Model.Language == 0 ? "পণ্য বা সেবার বর্ণনা (প্রযোজ্য ক্ষেত্রে ব্রান্ড নামসহ)" : "Description of product or service (with brand name if applicable)")
									</td>
									<td>
										@(Model.Language == 0 ? "সরবরাহের একক" : "Unit of Supply")
									</td>
									<td>
										@(Model.Language == 0 ? "পরিমাণ" : "Quantity")
									</td>
									<td>
										@Html.Raw(Model.Language == 0 ? "একক মূল্য (টাকায়)" : "Unit Price (Taka)")
									</td>
									<td>
										@Html.Raw(Model.Language == 0 ? "মোট মূল্য (টাকায়)" : "Total Price (Taka)")
									</td>
									<td>
										@(Model.Language == 0 ? "মন্তব্য" : "Remarks")
									</td>
								</tr>
								<tr class="text-center">
									<td>(@(Model.Language == 0 ? "১" : "1"))</td>
									<td>(@(Model.Language == 0 ? "২" : "2"))</td>
									<td>(@(Model.Language == 0 ? "৩" : "3"))</td>
									<td>(@(Model.Language == 0 ? "৪" : "4"))</td>
									<td>(@(Model.Language == 0 ? "৫" : "5"))</td>
									<td>(@(Model.Language == 0 ? "৬" : "6"))</td>
									<td>(@(Model.Language == 0 ? "৭" : "7"))</td>


								</tr>


								@if (Model.ChallanModel.TransferChallanDetails.Any())
								{
									foreach (var item in Model.ChallanModel.TransferChallanDetails)
									{
										<tr>
											<td class="serial-cell">@item.SlNo</td>

											<td class="name-cell">@item.ProductName</td>
											<td class="unit-name-cell">@item.MeasurementUnitName</td>
											<td class="amount-quantity-cell">
												@StringGenerator.DecimalToCommaSeparated(item.Quantity)
											</td>
											<td class="amount-quantity-cell">
												@StringGenerator.DecimalToCommaSeparated(item.UnitPrice)
											</td>
											<td class="amount-quantity-cell">
												@StringGenerator.DecimalToCommaSeparated(item.ProductPrice)
											</td>
											<td class="name-cell">@item.ProductRemarks</td>
										</tr>
										sumProductPrice += item.ProductPrice;
									}
									<tr>
										<td colspan="5" class="total-text-cell text-right">@(Model.Language == 0 ? "সর্বমোট=" : "Total")</td>
										<td class="amount-quantity-cell">@(StringGenerator.DecimalToCommaSeparated(sumProductPrice))</td>
										<td class="amount-quantity-cell"></td>
									</tr>
									<tr>
										<td colspan="2" class="total-text-cell">@(Model.Language == 0 ? "সর্বমোট মূল্য কথায়" : " Total Price in words")</td>
										<td colspan="5" class="name-cell"> @(VmsNumberToWord.ConvertAmountUsingTakaPoishaInEng(sumProductPrice))</td>
									</tr>
								}

								</tbody>

							</table>
						</div>

						<div class="col-12" style="margin-top: 100px; padding-left: 20px">

							<div> @(Model.Language == 0 ? "প্রতিষ্ঠান কর্তৃপক্ষের দায়িত্ব প্রাপ্ত ব্যক্তির নাম" : "Name of the person in charge of the Organization"): @Model.ChallanModel.TransferChallan.VatResponsiblePersonName </div>
							<div> @(Model.Language == 0 ? "পদবি" : "Designation"): @Model.ChallanModel.TransferChallan.VatResponsiblePersonDesignation </div>
							<div class="mt-3 mb-3">
								@(Model.Language == 0 ? "স্বাক্ষর" : "Signature"):
								@if (!string.IsNullOrEmpty(Model.ChallanModel.TransferChallan.VatResponsiblePersonSignUrl))
								{
									<img src="@Url.Content(StringGenerator.RemoveWwwRoot(Model.ChallanModel.TransferChallan.VatResponsiblePersonSignUrl))" alt="@Model.ChallanModel.TransferChallan.VatResponsiblePersonName" class="signature-image"/>
								}

							</div>
							<div class="mb-4 mt-3"> @(Model.Language == 0 ? "সীল" : "Seal"): </div>
						</div>

						@if (!string.IsNullOrEmpty(Model.ChallanModel.TransferChallan.BranchTransferSendRemarks))
						{
							<div class="col-12 mt-3">
								<div class="font-weight-semi-bold">@(Model.Language == 0 ? "মন্তব্য : " : "Remarks : ")</div>
								<div class="ps-4">@Model.ChallanModel.TransferChallan.BranchTransferSendRemarks</div>
							</div>
						}
					</div>
				}
				else
				{
					<h1>
						@(Model.Language == 0 ? "কোন তথ্য পাওয়া যায়নি" : "No Data Found")
					</h1>
				}
				<div class="print-footer">
					<div class="text-center">@(Model.Language == 0 ? "** এটি একটি কম্পিউটার কর্তৃক প্রস্তুতকৃত দলিল, এতে কোন হস্তকৃত স্বাক্ষর এর প্রয়োজন নেই। **" : "** This document is system-generated. No signature is required. **")</div>
					@(Model.Language == 0 ? "চালানপত্র তৈরির/মুদ্রণের সময়" : "Generated/Printed on"): @StringGenerator.DateTimeToString(DateTime.Now)
				</div>
			</div>
		</div>
	</div>
</div>

@section Scripts{
	<script>

		$(document).ready(function() {
			window.$("#btnPrint").click(function() {
				window.vmsPrint.printA4Portrait('printableArea');
			});
		});
	</script>
}